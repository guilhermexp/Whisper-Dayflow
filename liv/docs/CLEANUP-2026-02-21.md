# Cleanup Report - 2026-02-21

## Objective

Full codebase sanitation: remove dead code, duplicates, standardize tooling, consolidate and update all documentation.

## Files Removed

### Dead Code
- `src/main/pile-utils/audioRecorder.js` - Unused legacy audio recorder (replaced by `lib/recorder.ts`)
- `src/main/pile-utils/autoUpdates.js` - Unused legacy updater (replaced by `src/main/updater.ts`)
- `src/renderer/src/hooks/useWindowResize.jsx` - Unused hook with zero imports

### Build Artifacts
- `build.log` - Build output log (16 KB)
- `out/` - Old build output directory
- `tsconfig.node.tsbuildinfo` - Build cache
- `tsconfig.web.tsbuildinfo` - Build cache

### Orphaned Files
- `src/renderer/src/components/setup.tsx` - Component with no imports (setup page is at `pages/setup.tsx`)
- `ChatGPT Image 23 de nov. de 2025, 20_55_15.png` - Temporary screenshot
- `scripts/Captura de Tela 2025-11-15 às 23.48.35.png` - Temporary screenshot
- `LICENSE` - Removed (project is private)
- `quickstart.md` - Consolidated into CLAUDE.md

### Duplicate Lock Files
- `bun.lock` - Bun lock file
- `package-lock.json` - npm lock file

### Consolidated Directories
- `ai_docs/*` → `docs/ai_docs/*`
- `specs/*` → `docs/specs/*`
- `resources/ai_specs/*` → removed (duplicates of specs)

## Package Manager Standardization

- **pnpm** is the only package manager
- Replaced all `npm run` references with `pnpm run` across:
  - `scripts/measure-startup.js`
  - `src/main/local-transcriber.ts`
  - `docs/BUILD-GUIDE.md`
  - `docs/screen-capture-robustness.md`
  - `docs/ai_docs/technical-report-autonomous-memory-kanban-2026-02-12.md`
  - `.planning/codebase/TESTING.md`
- `.gitignore` updated to block `package-lock.json`, `bun.lock`, `yarn.lock`

## .gitignore Improvements

Added comprehensive entries:
- `out/`, `*.tsbuildinfo`, `build.log`
- `*.dmg`, `*.blockmap`
- IDE files (`.idea/`, `.vscode/`, `*.swp`)
- Environment files (`.env`, `.env.*`)
- OS files (`Thumbs.db`)

## Documentation Rewritten

| File | Status |
|------|--------|
| `CLAUDE.md` | Rewritten - comprehensive dev guide with tables, dual config docs |
| `README.md` | Rewritten - clean project overview with tech stack table |
| `AGENTS.md` | Rewritten - concise agent protocol (was 450 lines, now ~100) |
| `docs/ARCHITECTURE.md` | Rewritten - full architecture with diagrams, all modules documented |
| `docs/CONVENTIONS.md` | Rewritten - complete conventions covering 10 areas |
| `docs/CLEANUP-2026-02-21.md` | Updated (this file) |

## Structural Issues Preserved (Not Changed)

These are known design patterns that work but could be improved in future:

- **Dual config systems** (`config.ts` + `pile-utils/store.ts`) - by design, documented in CLAUDE.md
- **Pile legacy JS modules** (`pile-utils/*.js`, `pile-handlers/*`) - still active, coexist with modern tipc.ts
- **tipc.ts size** (1,672 lines, 60+ procedures) - works but should be split into domain modules
- **console.log usage** (~214 occurrences in main/) - should migrate to logger.ts
- **nanobot-ref/** - Kept as reference implementation (separate git repo)
